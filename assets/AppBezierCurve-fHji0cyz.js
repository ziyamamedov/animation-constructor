import{r as x,R as o,j as b,u as X,A as ne}from"./index-Ba5Gd3wv.js";var ae=Object.create,Y=Object.defineProperty,oe=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,ie=Object.getPrototypeOf,se=Object.prototype.hasOwnProperty,le=(r,e)=>function(){return e||(0,r[I(r)[0]])((e={exports:{}}).exports,e),e.exports},ce=(r,e,t,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of I(e))!se.call(r,n)&&n!==t&&Y(r,n,{get:()=>e[n],enumerable:!(a=oe(e,n))||a.enumerable});return r},D=(r,e,t)=>(t=r!=null?ae(ie(r)):{},ce(e||!r||!r.__esModule?Y(t,"default",{value:r,enumerable:!0}):t,r)),U=le({"node_modules/classnames/index.js"(r,e){(function(){var t={}.hasOwnProperty;function a(){for(var n=[],p=0;p<arguments.length;p++){var s=arguments[p];if(s){var u=typeof s;if(u==="string"||u==="number")n.push(s);else if(Array.isArray(s)){if(s.length){var f=a.apply(null,s);f&&n.push(f)}}else if(u==="object")if(s.toString===Object.prototype.toString)for(var d in s)t.call(s,d)&&s[d]&&n.push(d);else n.push(s.toString())}}return n.join(" ")}typeof e<"u"&&e.exports?(a.default=a,e.exports=a):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return a}):window.classNames=a})()}});function z(r,e){const t=[0,r],a=[r,0],n=[r*e[0],r*(1-e[1])],p=[r*e[2],r*(1-e[3])];return{startCoordinate:t,endCoordinate:a,startBezierHandle:n,endBezierHandle:p}}var P=D(U(),1),l={root:"BezierCurveEditor_root",wrap:"BezierCurveEditor_wrap",bg:"BezierCurveEditor_bg",plane:"BezierCurveEditor_plane",innerArea:"BezierCurveEditor_innerArea",row:"BezierCurveEditor_row",curve:"BezierCurveEditor_curve",handleLine:"BezierCurveEditor_handleLine",curveLine:"BezierCurveEditor_curveLine",preview:"BezierCurveEditor_preview","preview-loop":"BezierCurveEditor_preview-loop",handle:"BezierCurveEditor_handle",active:"BezierCurveEditor_active",fixed:"BezierCurveEditor_fixed",start:"BezierCurveEditor_start",end:"BezierCurveEditor_end"};function de({size:r,outerAreaSize:e,strokeWidth:t,innerAreaColor:a,rowColor:n}){return o.createElement("div",{className:l.plane,style:{top:`${e+t}px`,left:`${t}px`,width:`${r-t}px`,height:`${r}px`}},o.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg"},o.createElement("rect",{width:"100",height:"101",className:l.innerArea,fill:a}),o.createElement("g",{className:l.row,fill:n},o.createElement("rect",{width:"100",height:"5"}),o.createElement("rect",{y:"10",width:"100",height:"5"}),o.createElement("rect",{y:"20",width:"100",height:"5"}),o.createElement("rect",{y:"30",width:"100",height:"5"}),o.createElement("rect",{y:"40",width:"100",height:"5"}),o.createElement("rect",{y:"50",width:"100",height:"5"}),o.createElement("rect",{y:"60",width:"100",height:"5"}),o.createElement("rect",{y:"70",width:"100",height:"5"}),o.createElement("rect",{y:"80",width:"100",height:"5"}),o.createElement("rect",{y:"90",width:"100",height:"5"}))))}function ue({value:r,size:e,strokeWidth:t,outerAreaSize:a,handleLineColor:n,curveLineColor:p,previewState:s}){const{startCoordinate:u,endCoordinate:f,startBezierHandle:d,endBezierHandle:h}=z(e,r),g=e+t*2,w=e+t*2+a*2;return o.createElement("svg",{className:l.curve,fill:"none",width:g,height:w,viewBox:`0 0 ${g} ${w}`},o.createElement("g",{transform:`translate(${t}, ${a+t})`},o.createElement("line",{className:l.handleLine,stroke:n,strokeWidth:"1",strokeLinecap:"round",x1:u[0],y1:u[1],x2:d[0],y2:d[1]}),o.createElement("line",{className:l.handleLine,stroke:n,strokeWidth:"1",strokeLinecap:"round",x1:f[0],y1:f[1],x2:h[0],y2:h[1]}),o.createElement("path",{className:l.curveLine,stroke:p,strokeWidth:t,strokeLinecap:"round",d:`M${u} C${d} ${h} ${f}`}),s!=="hidden"&&o.createElement("circle",{className:l.preview,r:8,cx:0,cy:0,strokeWidth:t,style:{offsetPath:`path('M${u} C${d} ${h} ${f}')`,animationTimingFunction:`cubic-bezier(${r})`,animationPlayState:s}})))}var V=D(U(),1);function pe({size:r,value:e,outerAreaSize:t,strokeWidth:a,handleLineColor:n,fixedHandleColor:p}){const{startCoordinate:s,endCoordinate:u}=z(r,e);return o.createElement(o.Fragment,null,o.createElement("span",{className:(0,V.default)(l.handle,l.fixed),style:{top:`${s[1]+t+a}px`,left:`${s[0]+a}px`,borderColor:n,backgroundColor:p}}),o.createElement("span",{className:(0,V.default)(l.handle,l.fixed),style:{top:`${u[1]+t+a}px`,left:`${u[0]+a}px`,borderColor:n,backgroundColor:p}}))}var y={size:200,outerAreaSize:50,strokeWidth:2,value:[.4,0,1,.6]};function fe(r){const{size:e=y.size,strokeWidth:t=y.strokeWidth,outerAreaSize:a=y.outerAreaSize,value:n=y.value,innerAreaColor:p,outerAreaColor:s,rowColor:u,handleLineColor:f,curveLineColor:d,fixedHandleColor:h,startHandleColor:g,endHandleColor:w,enablePreview:F,className:T,startHandleClassName:q,endHandleClassName:J,startHandleActiveClassName:N,endHandleActiveClassName:$,onChange:_}=r,[C,H]=x.useState(!1),[E,S]=x.useState(!1),B=x.useRef(n),M=x.useRef({x:0,y:0}),O=x.useRef({x:0,y:0}),{startCoordinate:he,endCoordinate:Ce,startBezierHandle:j,endBezierHandle:A}=z(e,n),G=i=>{const m=a/e,c=[...i];return c[0]=Math.max(0,Math.min(1,c[0])),c[2]=Math.max(0,Math.min(1,c[2])),c[1]=Math.max(-m,Math.min(1+m,c[1])),c[3]=Math.max(-m,Math.min(1+m,c[3])),c},L=(i,m)=>{const c=C?M.current:E?O.current:void 0;if(C||E){const R=(i-c.x)/e,k=(m-c.y)/e,v=[...B.current];C&&(v[0]=v[0]+R,v[1]=v[1]-k),E&&(v[2]=v[2]+R,v[3]=v[3]-k);const re=G(v);_&&(_==null||_(re))}},K=i=>{if(C)return;i.preventDefault(),H(!0);const m=i.screenX,c=i.screenY;B.current=[...n],M.current={x:m,y:c},i.currentTarget.setPointerCapture(i.pointerId)},Q=i=>{if(C){const m=i.screenX,c=i.screenY;L(m,c)}},Z=i=>{i.currentTarget.releasePointerCapture(i.pointerId),H(!1)},W=i=>{if(E)return;S(!0);const m=i.screenX,c=i.screenY;B.current=[...n],O.current={x:m,y:c},i.currentTarget.setPointerCapture(i.pointerId)},ee=i=>{if(E){const m=i.screenX,c=i.screenY;L(m,c)}},te=i=>{i.currentTarget.releasePointerCapture(i.pointerId),S(!1)};return o.createElement("div",{className:(0,P.default)(l.root,T)},o.createElement("div",{className:l.wrap},o.createElement("div",{role:"presentation",className:l.bg,style:{left:`${t}px`,width:`${e-t}px`,backgroundColor:s}}),o.createElement(de,{size:e,outerAreaSize:a,strokeWidth:t,innerAreaColor:p,rowColor:u}),o.createElement(ue,{value:n,size:e,strokeWidth:t,outerAreaSize:a,handleLineColor:f,curveLineColor:d,previewState:F?C||E?"paused":"running":"hidden"}),o.createElement(pe,{size:e,value:n,outerAreaSize:a,strokeWidth:t,handleLineColor:f,fixedHandleColor:h}),o.createElement("button",{type:"button",className:(0,P.default)(l.handle,l.start,q,{[l.active]:C,[N]:!!N&&C}),style:{top:`${j[1]+a+t}px`,left:`${j[0]+t}px`,color:g,backgroundColor:g},onPointerDown:K,onPointerMove:Q,onPointerUp:Z}),o.createElement("button",{type:"button",className:(0,P.default)(l.handle,l.end,J,{[l.active]:E,[$]:!!$&&E}),style:{top:`${A[1]+a+t}px`,left:`${A[0]+t}px`,color:w,backgroundColor:w},onPointerDown:W,onPointerMove:ee,onPointerUp:te})))}/*! Bundled license information:

classnames/index.js:
  (*!
    Copyright (c) 2018 Jed Watson.
    Licensed under the MIT License (MIT), see
    http://jedwatson.github.io/classnames
  *)
*/const xe=({formValue:r,className:e,onClose:t,...a})=>{const n=r.startsWith("cubic-bezier")?r.match(/[0-9.]+/g).map(Number):[],[p,s]=x.useState([n[0],n[1],n[2],n[3]]),u=d=>{s(d),a.onChange&&a.onChange(d)},f=x.useRef(null);return x.useEffect(()=>{function d(h){f.current&&!f.current.contains(h.target)&&t()}return document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[t]),b.jsxs(me,{ref:f,className:e,children:[b.jsx(ve,{onClick:t}),b.jsx(fe,{...a,onChange:u,value:p})]})},me=X.div.withConfig({displayName:"AppBezierCurve__Block",componentId:"sc-ff437e7d-0"})(["padding:8px 4px 4px;"]),ve=X(ne).withConfig({displayName:"AppBezierCurve__StyledCloseButton",componentId:"sc-ff437e7d-1"})(["position:absolute;top:2px;right:2px;z-index:1;"]);export{xe as AppBezierCurve};
